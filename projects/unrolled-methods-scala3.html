<!DOCTYPE html><html><head><meta charset="utf-8" /><meta name="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.css" /><link rel="stylesheet" href="/static/css/style_28d0663040790cd23ff0c2e10c66384d.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" crossorigin="anonymous" /><title>Add method unrolling to Scala 3 | bishabosha</title><meta name="description" content="Enhance the Scala language to support binary compatible addition of parameters." /><meta name="twitter:card" content="summary" /><meta name="twitter:title" content="Add method unrolling to Scala 3 | bishabosha" /><meta name="twitter:site" content="@bishabosha" /><meta name="twitter:description" content="Enhance the Scala language to support binary compatible addition of parameters." /><meta name="og:title" content="Add method unrolling to Scala 3 | bishabosha" /><meta name="og:description" content="Enhance the Scala language to support binary compatible addition of parameters." /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" /><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js" type="text/javascript"></script><link rel="stylesheet" href="/static/css/admonition_972c50a2320249eebf61150270d503dc.css" /></head><body class="d-flex flex-column min-vh-100"><nav class="navbar navbar-expand-md navbar-light fixed-top bg-light"><div class="container-fluid"><a class="navbar-brand navbar-slash" href="/">bishabosha</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="/about/">About</a></li><li class="nav-item"><a class="nav-link" href="/articles/">Articles</a></li><li class="nav-item"><a class="nav-link active" aria-current="page" href="/projects/">Projects</a></li><li class="nav-item"><a class="nav-link" href="/talks/">Talks</a></li></ul></div></div></nav><div class="container"><div class="row"><div class="col-lg-4"><div class="bio-box jumbotron sidebar shadow py-lg-4 py-3 bio-box__top"><div class="bio-main"><table><tr><td class="bio-left"><div class="bio-photo"><img src="/static/img/jamie_thompson_profile.png" alt="photo of bishabosha" class="img-avatar" /></div></td><td class="bio-right"><p><span class="bio-name">Jamie Thompson</span></p></td></tr></table><ul class="list-inline"><li class="list-inline-item"><p class="text-center mb-1"><small><a href="https://github.com/bishabosha" class="bio-link" rel="me"><i class="fa-brands fa-github fa-lg"></i><br />GitHub</a></small></p></li><li class="list-inline-item"><p class="text-center mb-1"><small><a href="https://twitter.com/bishabosha" class="bio-link" rel="me"><i class="fa-brands fa-twitter fa-lg"></i><br />Twitter</a></small></p></li><li class="list-inline-item"><p class="text-center mb-1"><small><a href="https://www.linkedin.com/in/james-richard-thompson/" class="bio-link" rel="me"><i class="fa-brands fa-linkedin fa-lg"></i><br />LinkedIn</a></small></p></li><li class="list-inline-item"><p class="text-center mb-1"><small><a href="https://fosstodon.org/@jrthompson" class="bio-link" rel="me"><i class="fa-brands fa-mastodon fa-lg"></i><br />Mastodon</a></small></p></li><li class="list-inline-item"><p class="text-center mb-1"><small><a href="/static/pages/generalJamesThompsonresume2024.html" class="bio-link"><i class="fa-solid fa-file fa-lg"></i><br />Resume</a></small></p></li></ul><div class="d-none d-sm-none d-lg-block"><hr /><div class="bio-body bio-expand" tabindex="0"><p>Freelancing, previously hacking compilers at the <a href="https://scala.epfl.ch" target="_blank">Scala Center</a>.</p>
<p>I love to share ideas about programming, whether it is though speaking,
producing video tutorials, or engaging in the learning process to deliver the best materials for newcomers.</p>
<p>As a software engineer, my passions are programming language design, and simplifying APIs.</p>
</div></div></div></div><div id="sidebar-anchor" class="sticky-top top-aligned jumbotron sidebar sidebar__mobile shadow py-lg-4 py-3"><div id="sidebar-toggler" class="sidebar_toggle"><i class="fa-regular fa-square-caret-right"></i></div><nav class="toc-nav"><ol class="list-unstyled"><li class="toc-level-1"><a href="#add-method-unrolling-to-scala-3.html">Add method unrolling to Scala 3</a></li><li class="toc-level-2"><a href="#about-the-project">About the Project</a></li><li class="toc-level-2"><a href="#current-status">Current Status</a></li></ol></nav></div></div><div class="col-lg-8"><div class="jumbotron bg-light py-lg-5 py-3"><article><h1 id="add-method-unrolling-to-scala-3.html" class="display-5 anchor-link__source"><img src="https://dotty.epfl.ch/project-logo/logo_dark.svg" alt="Project 1 Icon" class="mr-2 bg-dark p-1 img-icon" />Add method unrolling to Scala 3</h1><ul class="list-inline mb-2"><li class="list-inline-item"><small><span class="text-muted">Start: Oct/2024</span></small></li><li class="list-inline-item"><small><i class="fa-solid fa-hourglass-start"></i> 1 minute read</small></li><li class="list-inline-item"><small><a href="/projects/"><i class="fa-solid fa-angle-up"></i> all projects</a></small></li></ul><hr /><div class="container mb-2"><div class="row"><div class="col d-flex"><small><a href="/projects/mill-build-scala3.html"><i class="fa-solid fa-angle-left"></i> Port Mill build.sc files to Scala 3</a></small></div><div class="col d-flex flex-row-reverse"></div></div></div><blockquote><p><a href="https://github.com/scala/scala3/pull/21693" target="_blank"><small><i class="fa-solid fa-arrow-up-right-from-square"></i></small> Project URL</a><b> this project is still in progress...</b></p><p><i><b>Summary: </b>Enhance the Scala language to support binary compatible addition of parameters.</i></p></blockquote><div><h2><a href="#about-the-project" id="about-the-project" class="anchor-link anchor-link__source"><i class="fa-solid fa-link"></i></a>About the Project</h2>
<p>Implement the specification of <a href="https://docs.scala-lang.org/sips/unroll-default-arguments.html">SIP-61</a>,
which specifies code generation of forwarder methods that match the signature of a method, before a parameter was added.</p>
<h2><a href="#current-status" id="current-status" class="anchor-link anchor-link__source"><i class="fa-solid fa-link"></i></a>Current Status</h2>
<p>The <a href="https://github.com/scala/scala3/pull/21693">PR</a> is open, tracking the current progress.</p>
<p>The feature is implemented, and passing the automated tests. The PR is currently under review from the SIP committee and Scala 3 maintainers.</p>
<p>Done:</p>
<ul>
<li>âœ… New annotation <code>@scala.annotation.unroll</code> to enable the feature.</li>
<li>âœ… New phase after typechecking, before pickling, to generate forwarder methods.</li>
<li>âœ… Detect correct usage of the annotation in prior &quot;posttyper&quot; phase.</li>
<li>âœ… Lazy transform - only run transform where the annotation is used.</li>
<li>âœ… Documentation page</li>
<li>âœ… Report errors with incorrect usage.</li>
<li>âœ… Detect problematic cases with transparent inline (where forwarders are not yet visible).</li>
<li>âœ… Test edge cases such as incremental compilation.</li>
<li>âœ… Test usage on <code>case class</code>, <code>enum</code>, <code>class</code>, <code>trait</code> and <code>object</code>.</li>
</ul>
<p>Still to do:</p>
<ul>
<li>ðŸš§ Potentially change implementation based on feedback.</li>
</ul>
</div><div class="container mb-2"><div class="row"><div class="col d-flex"><small><a href="/projects/mill-build-scala3.html"><i class="fa-solid fa-angle-left"></i> Port Mill build.sc files to Scala 3</a></small></div><div class="col d-flex flex-row-reverse"></div></div></div></article></div></div></div></div><footer class="mt-auto"><div class="footer-copyright text-center py-3"><small>Â© 2024 Jamie Thompson.<span class="text-muted"> Last published 21/Oct/2024</span></small></div></footer><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script><script src="/static/js/nav-toc_50380f89e0ac8b1f7a353e494026d8dd.js" type="text/javascript"></script><script src="/static/js/sidebar-mobile_63c21c40d63ae89bd8880d2e1b3dc2c9.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js" type="text/javascript"></script><script src="/static/js/hljs-scala3_868eb64187ff110dc72ccc6085774ee9.js" type="text/javascript"></script><script src="/static/js/hljs_a6372cedaa54e6ef1cd502062aef22a1.js" type="text/javascript"></script><script src="/static/js/katex-render_ea5696b3297f767be055588a9afda5ce.js" type="text/javascript"></script><script src="/static/js/admonition_70fb98d2c3c7311ff9783fd7412c7132.js" type="text/javascript"></script></body></html>